<!DOCTYPE html>
<html>

    <head>
        <title>Better Prompt - Prompt 优化器</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <style>
            /* Enhanced CSS for layout compactness and improved visual flow */

            body {
                /* Slightly reduce overall padding for a tighter feel if desired */
                /* padding: 15px; */
            }

            .container {
                /* Potentially reduce gap if space is very tight */
                /* gap: 20px; */
            }

            .panel {
                /* Reduce panel padding slightly if needed */
                /* padding: 20px; */
            }

            /* --- Settings Panel Optimization --- */
            .settings-panel {
                padding: 18px 20px 15px 20px;
                /* Top/Horizontal/Bottom */
                margin-bottom: 15px;
                /* Reduced space before original prompt */
            }

            .settings-header {
                margin-bottom: 12px;
                /* Tighter spacing after header */
                position: relative;
            }

            /* Keep the decorative line, but make it less prominent or adjust position */
            .settings-header::after {
                bottom: -6px;
                /* Closer to the title */
                height: 2px;
                width: 50px;
                /* Shorter line */
            }

            .settings-icon {
                font-size: 20px;
                /* Slightly smaller icon */
                margin-right: 8px;
                padding: 6px;
                /* Smaller padding for icon background */
            }

            .settings-title {
                font-size: 18px;
                /* Slightly smaller title */
            }

            .settings-content {
                gap: 12px;
                /* Reduced gap between setting groups */
            }

            .settings-group {
                margin-bottom: 10px;
                /* Reduced space between groups */
            }

            .settings-group:last-child {
                margin-bottom: 0;
            }

            .group-title {
                font-size: 13px;
                /* Smaller group title */
                margin-bottom: 6px;
                /* Tighter spacing for group title */
                color: var(--text-medium);
            }

            .template-tabs {
                padding: 4px;
                /* Tighter padding for tab container */
                gap: 5px;
                margin-top: 2px;
                /* Closer to its group title */
            }

            .template-tab {
                padding: 7px 10px;
                /* More compact tabs */
                font-size: 13px;
                /* Slightly smaller font in tabs */
            }

            .controls-group {
                /* This is the group for model and temperature */
                gap: 15px;
                /* Space between model and temperature controls */
                /* margin-top: 5px; Remove this if group-title provides enough space */
            }

            .control-item {
                /* Individual control like model selector or temp slider */
                gap: 4px;
                /* Reduced gap within control item (label to control) */
            }

            .control-label {
                font-size: 13px;
                /* Smaller control labels */
                margin-bottom: 2px;
                /* Closer to the control itself */
                font-weight: 500;
            }

            .select-wrapper {
                border-radius: 6px;
                /* Slightly smaller border radius */
            }

            .styled-select {
                padding: 8px 10px;
                /* Compact select padding */
                font-size: 13px;
                height: 36px;
                /* Explicit height for consistency */
            }

            /* Ensure the select arrow is still visible and well-placed */
            .styled-select {
                background-position: right 10px center;
                padding-right: 30px;
                /* Ensure space for arrow */
            }


            .slider-container {
                padding: 8px 12px;
                /* Compact slider container */
                border-radius: 6px;
                height: 36px;
                /* Match select height for alignment */
                box-sizing: border-box;
                /* Include padding and border in element's total width and height */

            }

            #temperatureSlider {
                height: 4px;
                /* Thinner slider track */
            }

            #temperatureSlider::-webkit-slider-thumb {
                width: 16px;
                /* Smaller thumb */
                height: 16px;
                margin-top: -6px;
                /* Adjust thumb position for thinner track */
            }

            #temperatureSlider::-moz-range-thumb {
                /* Firefox */
                width: 16px;
                height: 16px;
            }

            #temperatureSlider::-ms-thumb {
                /* IE/Edge */
                width: 16px;
                height: 16px;
            }


            .temperature-value {
                font-size: 13px;
                /* Smaller temperature value text */
                min-width: 28px;
                /* Ensure it fits 0.0 or 1.0 */
                font-weight: 500;
                padding: 3px 5px;
                /* Add some padding to the value display */
                border-radius: 4px;
                background-color: var(--bg-main);
                /* Subtle background */
            }

            .help-text {
                font-size: 10px;
                /* Smaller help text */
                margin-top: 2px;
                /* Closer to the slider */
                color: var(--text-light);
            }

            /* --- Input Section Adjustments --- */
            .input-section .panel-title {
                font-size: 16px;
                /* Maintain a clear title for input */
                margin-bottom: 8px;
                /* Space before textarea */
            }

            #originalPrompt {
                /* min-height: 150px; You might want to adjust this dynamically or set a comfortable default */
                /* The style="height: 180px" in HTML will override this if not removed */
            }

            .optimize-button {
                margin-top: 12px;
                /* Space after textarea, before button */
            }

            /* --- Right Panel --- */
            .right-panel .panel-title {
                margin-bottom: 8px;
                /* Space before output textarea */
            }
        </style>
    </head>

    <body>
        <header>
            <h1>Better Prompt - Prompt 优化器</h1>
            <div class="description">输入原始提示词，一键优化提升效果。可选不同模板和模型。</div>
        </header>

        <div class="container">
            <div class="panel left-panel">
                <!-- Settings Panel: This is now more compact -->
                <section class="settings-panel">
                    <header class="settings-header">
                        <span class="settings-icon material-icons">settings</span>
                        <h2 class="settings-title">优化设置</h2>
                    </header>
                    <div class="settings-content">
                        <div class="settings-group">
                            <h3 class="group-title">优化模板</h3>
                            <div id="templateTabs" class="template-tabs" role="tablist" aria-label="模板选项">
                                <button class="template-tab active" role="tab" aria-selected="true"
                                    data-value="default">默认模板</button>
                                <button class="template-tab" role="tab" aria-selected="false"
                                    data-value="concise">简洁模板</button>
                                <button class="template-tab" role="tab" aria-selected="false"
                                    data-value="detailed">扩展模板</button>
                                <button class="template-tab" role="tab" aria-selected="false" data-value="custom"
                                    style="display: none;">自定义模板</button> <!-- Kept hidden as per original -->
                            </div>
                        </div>

                        <div class="settings-group controls-group"> <!-- This class now used for model/temp block -->
                            <div class="control-item model-control">
                                <!-- Added class for specific targeting if needed -->
                                <label for="modelSelector" class="control-label">使用模型</label>
                                <div class="select-wrapper">
                                    <select id="modelSelector" class="styled-select">
                                        <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option>
                                        <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                                        <option value="gemini-2.5-flash-preview-04-17" selected>Gemini 2.5 Flash
                                        </option>
                                        <option value="gemini-2.5-pro-exp-03-25">Gemini 2.5 Pro</option>
                                    </select>
                                </div>
                            </div>

                            <div class="control-item temperature-control"> <!-- Added class for specific targeting -->
                                <label for="temperatureSlider" class="control-label">温度</label>
                                <div class="slider-container">
                                    <input type="range" id="temperatureSlider" min="0" max="1" step="0.1" value="0.1"
                                        aria-valuemin="0" aria-valuemax="1" aria-valuenow="0.1">
                                    <span id="temperatureValue" class="temperature-value">0.1</span>
                                </div>
                                <span class="help-text">低值=稳定内容，高值=创新内容</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Input Section: Remains prominent -->
                <div class="input-section">
                    <div class="panel-title"> <!-- Removed inline style, control via CSS -->
                        <span class="material-icons panel-icon">edit</span>原始提示词
                    </div>
                    <textarea id="originalPrompt" placeholder="在此输入您的原始提示词..." style="height: 180px;"></textarea>
                    <!-- Height can be adjusted -->
                    <button id="optimizeButton" class="optimize-button">
                        <span class="material-icons">auto_fix_high</span>优化提示词
                    </button>
                </div>
            </div>

            <div class="panel right-panel">
                <div class="panel-title">
                    <span class="material-icons panel-icon">psychology</span>优化结果
                </div>
                <textarea id="optimizedPrompt" placeholder="优化后的提示词将显示在这里..." style="height: 180px;"></textarea>
                <!-- Height can be adjusted -->
                <div class="button-container">
                    <button id="copyButton" class="copy-button" disabled>
                        <span class="material-icons">content_copy</span>复制结果
                    </button>
                    <button id="clearButton">
                        <span class="material-icons">clear</span>清空
                    </button>
                </div>
            </div>
        </div>

        <div class="loading-indicator" id="loadingIndicator">
            <div class="spinner"></div>
            <span>正在优化提示词...</span>
        </div>

        <div class="footer">BetterPrompt - 让您的提示词更高效</div>

        <div id="templateTooltip" class="template-tooltip"></div>

        <script src="prompt_optimizer.js"></script>
    </body>

</html>